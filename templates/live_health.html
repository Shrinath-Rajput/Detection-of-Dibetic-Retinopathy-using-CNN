<!DOCTYPE html>
<html>
<head>
    <title>Live Health | Clinsense-AI</title>
    <style>
        body{font-family:Arial;background:#f4f6f8;margin:0}
        .container{max-width:900px;margin:40px auto}
        .card{
            background:white;
            padding:25px;
            border-radius:10px;
            box-shadow:0 4px 12px rgba(0,0,0,0.1);
            margin-bottom:20px;
        }
    </style>
</head>
<body>

{% include "_navbar.html" %}

<div class="container">

    <div class="card">
        <h2>‚ù§Ô∏è Live Health Monitoring</h2>
        <p>Heart Rate: <b id="hr">--</b> BPM</p>
        <p>SpO‚ÇÇ: <b id="spo2">--</b> %</p>
        <p>Status: <b id="status">--</b></p>
    </div>

    <div class="card">
        <h2>üß† Health Analysis</h2>
        <p>Heart Rate Status: <b id="hr_status">--</b></p>
        <p>SpO‚ÇÇ Status: <b id="spo2_status">--</b></p>
    </div>

    <div class="card">
        <h2>‚ö†Ô∏è Risk Prediction</h2>
        <ul id="risk"></ul>
    </div>

    <div class="card">
        <h2>‚úÖ Preventive Advice</h2>
        <ul id="advice"></ul>
    </div>

</div>

<script>
function fetchData(){
    fetch("/live_sensor")
    .then(r=>r.json())
    .then(d=>{
        document.getElementById("hr").innerText=d.heart_rate ?? "--";
        document.getElementById("spo2").innerText=d.spo2 ?? "--";
        document.getElementById("status").innerText=d.status ?? "--";
    });

    fetch("/health_analysis")
    .then(r=>r.json())
    .then(d=>{
        document.getElementById("hr_status").innerText=d.heart_rate_status;
        document.getElementById("spo2_status").innerText=d.spo2_status;

        let rEl=document.getElementById("risk");
        rEl.innerHTML="";
        d.risk.forEach(x=>{
            let li=document.createElement("li");
            li.innerText=x;
            rEl.appendChild(li);
        });

        let aEl=document.getElementById("advice");
        aEl.innerHTML="";
        d.advice.forEach(x=>{
            let li=document.createElement("li");
            li.innerText=x;
            aEl.appendChild(li);
        });
    });
}

setInterval(fetchData,2000);
fetchData();
</script>

</body>
</html>
